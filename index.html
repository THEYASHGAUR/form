<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Panel Questionnaire</title>
    <!-- Link to external stylesheet -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <!-- Main container for the form -->
        <div class="form-container">
            <!-- Header section with title - only shown during questions -->
            <div id="premium-header" class="header">
                <h4>Calculate your premium!</h4>
                <div class="line-box">
                    <div class="line"></div>
                </div> 
            </div>

            <div id="question-container">
                <!-- Questions will be dynamically inserted here by JavaScript -->
            </div>

            <div id="eligibility-container" class="hidden">
                <div class="header">
                    <h4>Are you eligible?</h4>
                    <div class="line-box">
                        <div class="line"></div>
                    </div>
                    <p>We will get back to you within 24 hours</p>
                </div>

                <div class="form-content">
                    <img src="./assets/family.jpg" alt="Family" class="form-image">
                    <form id="eligibility-form">
                        <div class="input-group">
                            <input type="text" placeholder="Name" required>
                            <input type="text" placeholder="Surname" required>
                        </div>
                        <div class="input-group">
                            <input type="tel" placeholder="Phone" required>
                            <input type="text" placeholder="Postcode" required>
                        </div>
                        <button type="submit" class="submit-button">Find out now!</button>
                    </form>
                </div>
            </div>
        </div>

        <script>
            // Data for the questionnaire
            const questions = [
                {
                    question: "On which roof will the solar panels be installed?",
                    options: [
                        { text: "Sloped roof", icon: "./assets/home.png" },
                        { text: "Flat roof", icon: "./assets/buildings.png" },
                        { text: "Flat + sloped roof", icon: "./assets/home.png" },
                        { text: "Garden", icon: "./assets/garden.png" },
                    ],
                },
                {
                    question: "What is the size of the area for installation?",
                    options: [
                        { text: "Small", icon: "./assets/solar-panel.png" },
                        { text: "Medium", icon: "./assets/solar-panel.png" },
                        { text: "Large", icon: "./assets/solar-panel.png" },
                        { text: "Extra Large", icon: "./assets/solar-panel.png" },
                    ],
                },
                {
                    question: "Do you require installation assistance?",
                    options: [
                        { text: "Yes", icon: "./assets/thumbs-up.png" },
                        { text: "No", icon: "./assets/negative-vote.png" },
                        { text: "Maybe", icon: "./assets/question.png" },
                        { text: "Need Consultation", icon: "./assets/telephone.png" },
                    ],
                },
            ];

            let currentQuestion = 0;
            const questionContainer = document.getElementById("question-container");
            const eligibilityContainer = document.getElementById("eligibility-container");
            const premiumHeader = document.getElementById("premium-header");

            function renderQuestion(index) {
                const questionData = questions[index];
                questionContainer.innerHTML = `
                    <div class="question">
                        <p>${questionData.question}</p>
                        <div class="options">
                            ${questionData.options
                                .map(
                                    (option, idx) => `
                                    <button onclick="handleOptionClick(${index}, ${idx})">
                                        <img src="${option.icon}" alt="${option.text}" class="icon">
                                        <span class="text">${option.text}</span>
                                    </button>`
                                )
                                .join("")}
                        </div>
                    </div>
                `;
            }

            function handleOptionClick(questionIndex) {
                const questionElement = document.querySelector(".question");
                questionElement.classList.add("fade-out");

                setTimeout(() => {
                    if (questionIndex < questions.length - 1) {
                        currentQuestion++;
                        renderQuestion(currentQuestion);
                    } else {
                        showEligibilityForm();
                    }
                }, 700);
            }

            function showEligibilityForm() {
                questionContainer.classList.add("hidden");
                premiumHeader.classList.add("hidden"); // Hide the premium header
                eligibilityContainer.classList.remove("hidden");
            }

            const eligibilityForm = document.getElementById("eligibility-form");
            eligibilityForm.addEventListener("submit", (event) => {
                event.preventDefault();
                alert("Thank you for submitting your details!");
            });

            renderQuestion(currentQuestion);
        </script>
    </div>
</body>

</html>